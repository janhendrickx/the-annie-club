{% set allPics = craft.entries().section('photogallery').one() %}
{% set gridsWrapperHeight = '500' %}

<div class="grids-wrapper" height="{{ gridsWrapperHeight ~ 'px' }}">
    {% for block in allPics.picMatrix %}    
        {% set mainPic = block.mainPic.one() %}
        {% set mainPicThumbImg = block.mainPic.one() %}
        {% set mainPicPosition = block.mainPicPosition.value %}
        {% set mainPicHeight = block.mainPicHeight %}
        {% set picsGoupWidth = block.picsGoupWidth %}
        {% set mainPicThumb = {
            mode: 'thumb',
            width: picsGoupWidth,
            quality: 75,
            position: 'center'
        } %}
        {% do mainPicThumbImg.setTransform(mainPicThumb) %}
        {% set otherPicHeight = gridsWrapperHeight - mainPic.getHeight(mainPicThumb) %}
        {% set otherPicWidth = (picsGoupWidth - mainPic.getWidth(mainPicThumb) / 2)  %}
        {# {% set otherPicsThumb = {
            mode: 'thumb',
            width: otherPicWidth,
            height: otherPicHeight,
            quality: 75,
            position: 'center'
        } %} #}
        
        {% if block.picsGroup|length > 1 %}
            {% include "_partials/grids/two-rows" %}
        {% else %}
            {% include "_partials/grids/one-on-one" %}
        {% endif %}

    {% endfor %}
</div>