{% set navigation = craft.entries().section('navigation').all() %}

<nav class="navbar navbar-expand-md">
    <div class="container">
        <a class="navbar-brand" href="{{ siteUrl }}" aria-label="Home">
            <img src="/assets/img/logo.png" width="175" height="175" alt="{{ siteName }}">
        </a>

        {# Knop om Offcanvas te triggeren, alleen zichtbaar op kleine schermen #}
        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        {# De Offcanvas component - De navigatie zal hier in zitten #}
        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
            
            {# Offcanvas Header #}
            <div class="offcanvas-header">
                {# <h5 class="offcanvas-title" id="offcanvasNavbarLabel">{{ siteName }}</h5> #}
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>

            {# Offcanvas Body met de Navigatie #}
            <div class="offcanvas-body">
                
                {# Dit is de navigatie die je al had, nu binnen de offcanvas-body #}
                <div class="navbar-nav ms-auto">
                    {% for navItem in navigation %}
                        {% set active = " " %}
                        {% set nav = navItem.navLink ?? null %}
                        {% if nav %}
                            {% if entry is defined and entry is not null %}
                                {% set active = entry.url == nav.value ? ' active' : '' %}
                            {% endif %}
                            <a class="nav-link{{ active }}" {% if nav.target %}target="{{ nav.target }}"{% endif %} aria-current="page" href="{{ nav.value }}">
                                {% if navItem.navIcon %}
                                    {{ tag('i', {
                                        class: [
                                            'brands' in navItem.navIcon.styles ? 'fab' : 'fa-solid',
                                            "fa-#{navItem.navIcon.name}",
                                        ],
                                    }) }}
                                {% else %}
                                    {{ nav.label }}
                                {% endif %}
                            </a>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
        
        {# Optioneel: Voor desktopversies wil je misschien de navigatie zichtbaar houden #}
        {# Als je wilt dat de navigatie op desktop zichtbaar blijft, moet je de 'navbar-nav' ook buiten het offcanvas plaatsen en de .collapse .navbar-collapse terugzetten. #}
        {# Als je alleen Offcanvas voor mobiel wilt, lees dan de tip hieronder. #}

    </div>
</nav>